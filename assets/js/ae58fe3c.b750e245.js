"use strict";(self.webpackChunkOPS235=self.webpackChunkOPS235||[]).push([[430],{3905:function(e,t,a){a.d(t,{Zo:function(){return c},kt:function(){return d}});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=n.createContext({}),p=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):s(s({},t),e)),a},c=function(e){var t=p(e.components);return n.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),m=p(a),d=r,h=m["".concat(l,".").concat(d)]||m[d]||u[d]||i;return a?n.createElement(h,s(s({ref:t},c),{},{components:a})):n.createElement(h,s({ref:t},c))}));function d(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,s=new Array(i);s[0]=m;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o.mdxType="string"==typeof e?e:r,s[1]=o;for(var p=2;p<i;p++)s[p]=a[p];return n.createElement.apply(null,s)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},3004:function(e,t,a){a.r(t),a.d(t,{assets:function(){return l},contentTitle:function(){return s},default:function(){return u},frontMatter:function(){return i},metadata:function(){return o},toc:function(){return p}});var n=a(3117),r=(a(7294),a(3905));const i={id:"bash-shell-scripting-tips",title:"Bash Shell Scripting Tips",sidebar_position:4,description:"Bash Shell Scripting Tips"},s="Bash Shell Scripting Tips",o={unversionedId:"C-ExtraResources/bash-shell-scripting-tips",id:"C-ExtraResources/bash-shell-scripting-tips",title:"Bash Shell Scripting Tips",description:"Bash Shell Scripting Tips",source:"@site/docs/C-ExtraResources/bash-shell-scripting-tips.md",sourceDirName:"C-ExtraResources",slug:"/C-ExtraResources/bash-shell-scripting-tips",permalink:"/OPS235/C-ExtraResources/bash-shell-scripting-tips",draft:!1,editUrl:"https://github.com/Seneca-ICTOER/OPS235/tree/main/docs/C-ExtraResources/bash-shell-scripting-tips.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{id:"bash-shell-scripting-tips",title:"Bash Shell Scripting Tips",sidebar_position:4,description:"Bash Shell Scripting Tips"},sidebar:"courseNotesSidebar",previous:{title:"Install Flash",permalink:"/OPS235/C-ExtraResources/install-flash"},next:{title:"Bash Shell Scripting Reference Guide",permalink:"/OPS235/C-ExtraResources/bash-shell-scripting-reference-guide"}},l={},p=[{value:"For Lab 2 - Investigation 3 Part 3",id:"for-lab-2---investigation-3-part-3",level:2},{value:"Data Input",id:"data-input",level:3},{value:"Mathematical Expressions",id:"mathematical-expressions",level:3},{value:"Loops (for / while / until)",id:"loops-for--while--until",level:3},{value:"For Lab 3 - Investigation 3 Part 3",id:"for-lab-3---investigation-3-part-3",level:2},{value:"The Here Document",id:"the-here-document",level:3},{value:"Using sed to Manipulate Text",id:"using-sed-to-manipulate-text",level:3},{value:"For Lab 4 - Investigation 3",id:"for-lab-4---investigation-3",level:2},{value:"The case statement",id:"the-case-statement",level:3},{value:"The getopts function",id:"the-getopts-function",level:3},{value:"For Lab 5 - Investigation 1 Part 2",id:"for-lab-5---investigation-1-part-2",level:2},{value:"Using awk to Manipulate Text",id:"using-awk-to-manipulate-text",level:3},{value:"Crontab (Chronograph Tables)",id:"crontab-chronograph-tables",level:3},{value:"For Lab 6 - Investigation 2 Part 3",id:"for-lab-6---investigation-2-part-3",level:2},{value:"Arrays",id:"arrays",level:3},{value:"Working with Temporary Files",id:"working-with-temporary-files",level:3}],c={toc:p};function u(e){let{components:t,...a}=e;return(0,r.kt)("wrapper",(0,n.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"bash-shell-scripting-tips"},"Bash Shell Scripting Tips"),(0,r.kt)("h2",{id:"for-lab-2---investigation-3-part-3"},"For Lab 2 - Investigation 3 Part 3"),(0,r.kt)("h3",{id:"data-input"},"Data Input"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"A shell can obtain data from a number of methods: ",(0,r.kt)("strong",{parentName:"li"},"reading input files"),", using ",(0,r.kt)("strong",{parentName:"li"},"arguments when issuing command")," (positional parameters), or ",(0,r.kt)("strong",{parentName:"li"},"prompting for data to store in a variable"),". The later method can be accomplished by using the ",(0,r.kt)("strong",{parentName:"li"},"read")," command."),(0,r.kt)("li",{parentName:"ul"},"Example:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'read -p "Enter your name: " userName.\n')),(0,r.kt)("h3",{id:"mathematical-expressions"},"Mathematical Expressions"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"In the bash shell, data is stored in variable as text, not other data types (ints, floats, chars, etc) like in compiled programs like C or Java. In order to have a shell perform ",(0,r.kt)("strong",{parentName:"li"},"mathematical operations"),", number or variable need to be surrounded by two sets of parenthesis ",(0,r.kt)("strong",{parentName:"li"},"((..))")," in order to convert a number stored as text to a binary number."),(0,r.kt)("li",{parentName:"ul"},"Examples")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'var1=5;var2=10\necho "$var1 + $var2 = $((var1+var2))"\n')),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Note"),": shell does not perform floating point calculations (like ",(0,r.kt)("strong",{parentName:"p"},"5/10"),"). Instead, other commands like ",(0,r.kt)("strong",{parentName:"p"},"awk")," or ",(0,r.kt)("strong",{parentName:"p"},"bc")," would be required for floating point calculations (decimals)"),(0,r.kt)("h3",{id:"loops-for--while--until"},"Loops (for / while / until)"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Determinant loops (such as ",(0,r.kt)("strong",{parentName:"li"},"for")," loops) usually repeat for a preset number of times (eg. counts, positional parameters stored). In-determinant loops (such as ",(0,r.kt)("strong",{parentName:"li"},"while")," or ",(0,r.kt)("strong",{parentName:"li"},"until")," loops) may repeat based on unknown conditions (like waiting for user to enter correct data)."),(0,r.kt)("li",{parentName:"ul"},"Conditional statements ",(0,r.kt)("strong",{parentName:"li"},"&&")," (run if previous command or test is true) and ",(0,r.kt)("strong",{parentName:"li"},"|","|")," (run is previous command or test is false) can also be used when testing multiple conditions."),(0,r.kt)("li",{parentName:"ul"},"Examples:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'set ops235 is fun\nfor x\ndo\n echo "argument is $x"\ndone\n\nfor x in $(ls)\ndo\n echo "Filename: $x"\ndone\n\nread -p "enter a whole number: " num\nuntil echo $num | grep -q "^[0-9][0-9]*$"\ndo\n read -p "Incorrect. Please enter WHOLE NUMBER: " num\ndone\n\nread -p "pick a number between 1 and 10: " num\nwhile [ $num -lt 1 ] || [ $num -gt 10 ]\ndo\n read -p "Incorrect. Please pick number between 1 and 10: " num\ndone\n')),(0,r.kt)("h2",{id:"for-lab-3---investigation-3-part-3"},"For Lab 3 - Investigation 3 Part 3"),(0,r.kt)("h3",{id:"the-here-document"},"The Here Document"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"A neat little trick involving a special type of redirection of stdin symbol: ",(0,r.kt)("strong",{parentName:"li"},"<<")," that allows input to be redirected to a command from within the command."),(0,r.kt)("li",{parentName:"ul"},"Examples:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"cat <<+\nThis is a test message\nThis is the second line\n+\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'mail -s "test message" youremailaddr <<+\nThis is a test message\nI hope you like it.\n+\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"tr [a-z] [A-Z] <<+\ni like ops235\ni love scripting.\n+\n")),(0,r.kt)("h3",{id:"using-sed-to-manipulate-text"},"Using sed to Manipulate Text"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"The Linux command ",(0,r.kt)("strong",{parentName:"li"},"sed")," stands for ",(0,r.kt)("strong",{parentName:"li"},"S"),"treaming ",(0,r.kt)("strong",{parentName:"li"},"Ed"),'itor which is an effective way to manipulate a text file, output sent from a command, or from within a "here document". This command can manipulate matching text on a variety of criteria (such as ',(0,r.kt)("strong",{parentName:"li"},"line number(s)"),", ",(0,r.kt)("strong",{parentName:"li"},"regular expression match"),", etc). Commands can then be used for manipulation such as ",(0,r.kt)("strong",{parentName:"li"},"omitting, printing, substituting, adding"),", and ",(0,r.kt)("strong",{parentName:"li"},"inserting")," text."),(0,r.kt)("li",{parentName:"ul"},"The sed option ",(0,r.kt)("strong",{parentName:"li"},"-n")," suppresses display of text so the print (",(0,r.kt)("strong",{parentName:"li"},"p"),") command can be used; otherwise, the text will be displayed (with edits via the sed command instructions)."),(0,r.kt)("li",{parentName:"ul"},"Results of text manipulation with sed can be stored in a variable using command substitution, or redirected to a file. ",(0,r.kt)("strong",{parentName:"li"},"NEVER redirect the stdout from a sed command to the same input file (or the input file will be destroyed)!")),(0,r.kt)("li",{parentName:"ul"},"Examples")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"sed 's/|/ /g' <<+\nI|like|weekends!\n+\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"sed 's/$/\\n/g' <<+\nThis text\nshould be\ndouble-spaced!\n+\n")),(0,r.kt)("h2",{id:"for-lab-4---investigation-3"},"For Lab 4 - Investigation 3"),(0,r.kt)("h3",{id:"the-case-statement"},"The case statement"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},'The case statement is a control-flow statement that works in a similar way as the if-elif-else statement (but is more concise). This statement presents scenerios or "cases" based on values or regular expressions (not ranges of values like if-elif-else statements).'),(0,r.kt)("li",{parentName:"ul"},'After action(s) are taken for a particular scenerio (or "case"), a break statement (;;) is used to "break-out" of the statement (and not perform other actions). A default case (*) is also used to catch exceptions.'),(0,r.kt)("li",{parentName:"ul"},"Examples:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'read -p "pick a door (1 or 2): " pick\ncase $pick in\n  1) echo "You win a car!" ;;\n  2) echo "You win a bag of dirt!" ;;\n  *) echo "Not a valid entry"\n     exit 1 ;;\nesac\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'read -p "enter a single digit: " digit\ncase $digit in\n  [0-9]) echo "Your single digit is: $digit" ;;\n         *) echo "not a valid single digit"\n             exit 1 ;;\nesac\n')),(0,r.kt)("h3",{id:"the-getopts-function"},"The getopts function"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"The getopts function allows the shell scripter to create scripts that accept options (like options for Linux commands). This provides the Linux administrator with scripts that provide more flexibility and versatility. A built-in function called ",(0,r.kt)("strong",{parentName:"li"},"getopts")," (i.e. get command options) is used in conjunction with a ",(0,r.kt)("strong",{parentName:"li"},"while")," loop and a ",(0,r.kt)("strong",{parentName:"li"},"case")," statement to carry out actions based on if certain options are present when the shell script is run."),(0,r.kt)("li",{parentName:"ul"},"The variable ",(0,r.kt)("strong",{parentName:"li"},"$OPTARG")," can be used if an option accepts text (denoted in the getopts function with an option letter followed by a colon. Case statement exceptions use the ",(0,r.kt)("strong",{parentName:"li"},":)")," and ",(0,r.kt)("strong",{parentName:"li"},"\\?)")," cases for error handling."),(0,r.kt)("li",{parentName:"ul"},"Example:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'while getopts abc: name\ndo\n  case $name in\n    a) echo "Action for option \\"a\\"" ;;\n    b) echo "Action for option \\"b\\"" ;;\n    c) echo "Action for option \\"c\\""\n        echo Value is: $OPTARG" ;;\n    :) echo "Error: You need text after -c option"\n        exit 1 ;;\n    \\?) echo "Error: Incorrect option"\n        exit 1 ;;\nesac\ndone\n')),(0,r.kt)("h2",{id:"for-lab-5---investigation-1-part-2"},"For Lab 5 - Investigation 1 Part 2"),(0,r.kt)("h3",{id:"using-awk-to-manipulate-text"},"Using awk to Manipulate Text"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Very useful command for report generation, text file repair, or text and floating-point decimal manipulation. The command mimics a C program, with braces ",(0,r.kt)("strong",{parentName:"li"},"{ }")," that surround the action to perform based on records from a database file matching either test conditions, regular expressions, etc. Fields appear as numbers with $."),(0,r.kt)("li",{parentName:"ul"},"Examples:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"awk '{print}' data-file.txt\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"awk -F\";\" '{print $5,$3}' data-file.txt\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"awk -F\",\" '$4 >= 10000 {print $1, $2}' salary.txt\n")),(0,r.kt)("h3",{id:"crontab-chronograph-tables"},"Crontab (Chronograph Tables)"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Used to automatically run (as opposed to manually run) scripts, programs, or commands. There are many tables (files), but the main one is: ",(0,r.kt)("strong",{parentName:"li"},"/etc/cron"),". The ",(0,r.kt)("strong",{parentName:"li"},"crontab")," command can be used to list, create, modify or remove scheduled jobs in the file."),(0,r.kt)("li",{parentName:"ul"},"Examples:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"crontab -e -u user # create/modify\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"crontab -r -u user-name # remove specific user's crontab\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"crontab -l -u username #List current schedules\n")),(0,r.kt)("h2",{id:"for-lab-6---investigation-2-part-3"},"For Lab 6 - Investigation 2 Part 3"),(0,r.kt)("h3",{id:"arrays"},"Arrays"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},'Incredibly useful tool that works like a "storage container" of variables. ',(0,r.kt)("strong",{parentName:"li"},"Arrays have names like variables, but are numbered for quick storage and access of related elements"),". Indices are I.D. numbers for array access. The first index starts at ",(0,r.kt)("strong",{parentName:"li"},"zero")," instead of ",(0,r.kt)("strong",{parentName:"li"},"1"),"."),(0,r.kt)("li",{parentName:"ul"},"Instead of using index numbers, you can use I.D. names: this is referred to as an ",(0,r.kt)("strong",{parentName:"li"},"Associative Array"),"."),(0,r.kt)("li",{parentName:"ul"},"Examples:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'for((x=0; x<5; x++)) # Example of a regular array\ndo\n  read -p "Enter item #$((x+1)): " item[xx]\ndone\nfor((y=0; y<5; y++))\ndo\n  echo ${item[y]}\ndone\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'set a b c # Example of an "Associative Array"\nfor x\ndo\n  read -p "Enter item $x: " item["$x"]\n  echo item[$x] is: ${item["$x"]}\ndone\n')),(0,r.kt)("h3",{id:"working-with-temporary-files"},"Working with Temporary Files"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"When creating temporary files, it is important NOT to store on a user's account (to avoid overwriting their existing files). Instead, temporary files can be created in the ",(0,r.kt)("strong",{parentName:"li"},"/tmp")," directory."),(0,r.kt)("li",{parentName:"ul"},"The $$ variable can be used as the filename extension which assigns the current PID of the shell script running to make the filename unique, and allow easy removal at the end of the shell script by deleting ALL files in the /tmp directory with the extension: .$$"),(0,r.kt)("li",{parentName:"ul"},"Example:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"ls -lR > /tmp/temp-file.$$\ngrep secret /tmp/temp-file.$$\nrm /tmp.$$\n")))}u.isMDXComponent=!0}}]);